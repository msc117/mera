<!-- dependencies -->
<link rel="import" href="../bower_components/paper-material/paper-material.html">

<dom-module id="mera-tile">
	<style>
	:host {
		background-color: cyan;
	}
	:host:not(:last-child) {
		margin-right: 2em;
	}
	a {
		text-decoration: none;
		color: inherit;	
	}
	.tile {
		display: -webkit-flex;
		display: flex;
		display: -ms-flex;
		flex-direction: column;
		-webkit-flex-direction: column;
		-ms-flex-direction: column;
		height: 200px;
		width: 200px;
		overflow: hidden;
	}
	#tileHeroImage {
		position: absolute;
		top, left, right, bottom: 0;
	}
	#tileHoverPopup {
		position: absolute;
		bottom: 0;
		background-color: white;		
		width: 100%;
		padding: 10px 16px;
		transition: all .32s ease-in-out;
		opacity: 0;
		visibility: hidden;
		box-sizing: border-box;
		transform: translate(0, 20px);
	}
	#tileHoverPopup.visible {
		visibility: visible;
		opacity: .7;
		transform: initial;
	}
	#tileHoverPopup > #tile-title {
		font-weight: bolder;
	}
	/*
	#preview {
		width: 100%;
	    height: 100%;
	    border: none;
	    -moz-transform: scale(0.2);
	    -moz-transform-origin: 0 0;
	    -o-transform: scale(0.2);
	    -o-transform-origin: 0 0;
	    -webkit-transform: scale(0.2);
	    -webkit-transform-origin: 0 0;
	} */
	</style>
	<template>		
		<paper-material elevation="3">
			<a href="{{data.href}}" class="tile">
					<!-- <img id="p2i_demo" src="http://api.page2images.com/directlink?p2i_url={{data.href}}&p2i_device=6&p2i_screen=1024x768&p2i_size=200x200&p2i_key=f0ebb88b3500f6cf" /> -->			
				<div id="tileHeroImage" style="background-color: {{data.color}}"></div>		
				<div id="tileHoverPopup">
					<div id="tile-title">{{data.title}}</div>
					<div id="tile-descr">{{data.descr}}</div>
				</div>
			</a>	
		</paper-material>		
	</template>
</dom-module>
<script>
(function() {
	/* TODO: NO JQUERY
	$(".tile").mouseenter(function() {
		this.removeClass("hidden");
	});
	$(".tile").mouseleave(function() {
		this.addClass("hidden");
	}); */

	Polymer({
		is: "mera-tile",

		listeners: {
			"mouseenter" : "tileHoverAction",
			"mouseleave" : "tileExitAction"
		},

		properties: {
			data: {
				type: Object,
				reflectToAttribute: true
			}
		},

		ready: function() {
			console.log(this.data);
		},

		tileHoverAction: function() {
			if (this.$.tileHoverPopup.className.indexOf("visible") == -1)
				this.$.tileHoverPopup.className += " visible";
		},
		tileExitAction: function() {
			this.$.tileHoverPopup.classList.remove('visible');
		}
	});
})();

</script>